<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Perfil - RF Driver</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">

<link rel="stylesheet" href="css/css-theme.css">
</head>

<body>

<div class="drawer-toggle" onclick="GlobalUI.toggleDrawer()">
  <i class="fa fa-bars"></i>
</div>

<div class="theme-toggle" onclick="GlobalTheme.toggle()">
  <i class="fa fa-moon"></i>
</div>

<div id="menu-lateral"></div>

<main id="conteudo">

  <section class="card">
    <h1 style="color:var(--gold)">Perfil</h1>
    <p style="opacity:.7">Dados pessoais, veículos e financeiro</p>
  </section>

  <!-- DADOS PESSOAIS -->
  <section class="card">
    <h3>Dados Pessoais</h3>

    <label>Nome</label>
    <input id="pNome">

    <label>Telefone</label>
    <input id="pTelefone">

    <label>Cidade / Estado</label>
    <input id="pCidade">

    <button class="btn-primary" onclick="salvarPessoal()">Salvar dados</button>
  </section>

  <!-- VEÍCULOS -->
  <section class="card">
    <h3>Veículos</h3>

    <label>Marca</label>
    <input id="vMarca">

    <label>Modelo</label>
    <input id="vModelo">

    <button class="btn-secondary" onclick="salvarVeiculo()">Adicionar veículo</button>

    <div id="listaVeiculos" style="margin-top:10px"></div>
  </section>

  <!-- FINANCEIRO -->
  <section class="card">
    <h3>Financeiro</h3>

    <label>Banco</label>
    <input id="fBanco">

    <label>Chave PIX</label>
    <input id="fPix">

    <button class="btn-primary" onclick="salvarFinanceiro()">Salvar financeiro</button>
  </section>

</main>

<div id="menu-inferior"></div>

<script src="js/js-dataManager.js"></script>
<script src="js/js-global.js"></script>
<script src="js/PlanoManager.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  GlobalUI.loadComponent("menu-lateral","components/components-menu-lateral.html");
  GlobalUI.loadComponent("menu-inferior","components/components-menu-inferior.html");
  carregarDados();
});

function salvarPessoal(){
  localStorage.setItem("perfil_pessoal", JSON.stringify({
    nome: pNome.value,
    telefone: pTelefone.value,
    cidade: pCidade.value
  }));
  alert("Dados pessoais salvos.");
}

function salvarVeiculo(){
  const lista = JSON.parse(localStorage.getItem("perfil_veiculos") || "[]");
  lista.push({ marca: vMarca.value, modelo: vModelo.value });
  localStorage.setItem("perfil_veiculos", JSON.stringify(lista));
  vMarca.value = "";
  vModelo.value = "";
  renderVeiculos();
}

function salvarFinanceiro(){
  localStorage.setItem("perfil_financeiro", JSON.stringify({
    banco: fBanco.value,
    pix: fPix.value
  }));
  alert("Dados financeiros salvos.");
}

function carregarDados(){
  const p = JSON.parse(localStorage.getItem("perfil_pessoal") || "{}");
  pNome.value = p.nome || "";
  pTelefone.value = p.telefone || "";
  pCidade.value = p.cidade || "";

  const f = JSON.parse(localStorage.getItem("perfil_financeiro") || "{}");
  fBanco.value = f.banco || "";
  fPix.value = f.pix || "";

  renderVeiculos();
}

function renderVeiculos(){
  const lista = JSON.parse(localStorage.getItem("perfil_veiculos") || "[]");
  listaVeiculos.innerHTML = lista.map(v => `
    <div class="item-list">
      <strong>${v.marca}</strong> ${v.modelo}
    </div>
  `).join("");
}
</script>

</body>
</html>
